webpackJsonp([12],{Nd3K:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return l});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)}},gawV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("2ay1"),l=a("wbDJ"),n=a("qxtv"),o=a("Nd3K"),s=a("vgQg"),p={name:"list",data:function(){return{tableData:[],params:{queryBeginDate:Object(o.b)(new Date,7),queryEndDate:Object(o.a)(new Date,1),page:{totalRecord:0,pageSize:s.a.pageSize?s.a.pageSize:20,page:1}},typeDict:Object(n.a)("sys_log_type")}},methods:{cellClass:function(e){e.row,e.column,e.rowIndex;return 11===e.columnIndex?"hide":""},handlePageChange:function(e){this.loadList()},hasBtnPermission:function(e){return Object(r.b)(e)},loadList:function(){Object(l.e)(this,"sys/sysLog/loadList",this.params)},getDictLabel:function(e){return Object(n.b)("sys_log_type",e)},showException:function(e){this.$refs.logTable.toggleRowExpansion(e,!e.expand),e.expand=!e.expand},sortChange:function(e){e.column,e.prop;var t=e.order;this.params.page.page=1,this.params.page.orderField="CREATE_DATE",this.params.page.orderBy="descending"===t?"desc":"asc",this.loadList()}},mounted:function(){this.loadList()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-wrapper log-wrapper"},[a("div",{staticClass:"params-wrapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"日志类型:"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},e._l(e.typeDict,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间段:"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.params.queryBeginDate,callback:function(t){e.$set(e.params,"queryBeginDate",t)},expression:"params.queryBeginDate"}}),e._v("\n            至\n            "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.params.queryEndDate,callback:function(t){e.$set(e.params,"queryEndDate",t)},expression:"params.queryEndDate"}})],1),e._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{"true-label":"1"},model:{value:e.params.exception,callback:function(t){e.$set(e.params,"exception",t)},expression:"params.exception"}},[e._v("异常日志")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(t){return e.loadList()}}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table-wrapper"},[a("el-table",{ref:"logTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:!0,"header-cell-class-name":e.cellClass,"cell-class-name":e.cellClass,height:"calc(100% - 40px)"},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s((e.params.page.page-1)*e.params.page.pageSize+t.$index+1)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.getDictLabel(t.row.type))+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"remoteAddr",label:"IP地址","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"userAgent",label:"Header","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"requestUri",label:"URI","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"method",label:"方法","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"params",label:"参数","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",sortable:"customer",label:"操作时间","sort-orders":["ascending","descending"],"show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUserName",label:"操作人","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"exception",label:"异常信息","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[""!=t.row.exception?a("el-button",{attrs:{type:"danger",icon:"search"},on:{click:function(a){return e.showException(t.row)}}},[e._v(e._s(t.row.expand?"隐藏":"查看"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.exception)+"\n            ")]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.params.page.page,"page-sizes":[10,20,30,50,100],"page-size":e.params.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.params.page.totalRecord},on:{"size-change":e.handlePageChange,"current-change":e.handlePageChange,"update:currentPage":function(t){return e.$set(e.params.page,"page",t)},"update:current-page":function(t){return e.$set(e.params.page,"page",t)},"update:pageSize":function(t){return e.$set(e.params.page,"pageSize",t)},"update:page-size":function(t){return e.$set(e.params.page,"pageSize",t)}}})],1)])},staticRenderFns:[]};var c=a("VU/8")(p,i,!1,function(e){a("u+X/")},"data-v-83233f58",null);t.default=c.exports},"u+X/":function(e,t){}});